{% extends 'vacancies/base.html' %}
{% load static %}

{% block title %}Востребованность{% endblock %}

{% block extra_css %}
    <link rel="stylesheet" type="text/css" href="{% static 'vacancies/css/demand.css' %}">
{% endblock %}

{% block content %}

    <h2 class="subsection-title">Средняя зарплата по годам</h2>
    <div class="chart-section">
        <img class="chart-img" src="{% static 'vacancies/img/demand_avg_salary.png' %}" alt="Средняя зарплата по годам">
        <div class="table-container">
            <table class="table">
                <thead class="table-header">
                    <tr>
                        <th>Год</th>
                        <th>Средняя зарплата (в рублях)</th>
                    </tr>
                </thead>
                <tbody>
                    {% for item in avg_salary_stats %}
                        <tr>
                            <td>{{ item.year }}</td>
                            <td>{{ item.average_salary }}</td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>

    <h2 class="subsection-title">Количество вакансий по годам</h2>
    <div class="chart-section">
        <img class="chart-img" src="{% static 'vacancies/img/vacancies_all.png' %}" alt="Количество всех вакансий">
        <div class="table-container">
            <table class="table">
                <thead class="table-header">
                    <tr>
                        <th>Год</th>
                        <th>Количество вакансий</th>
                    </tr>
                </thead>
                <tbody>
                    {% for item in vacancy_stats %}
                        <tr>
                            <td>{{ item.year }}</td>
                            <td>{{ item.vacancy_count }}</td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>

    <h2 class="subsection-title">Средняя зарплата для Backend-программиста по годам</h2>
    <div class="chart-section">
        <img class="chart-img" src="{% static 'vacancies/img/demand_avg_salary_backend.png' %}" alt="Средняя зарплата для Backend-программиста по годам">
        <div class="table-container">
            <table class="table">
                <thead class="table-header">
                    <tr>
                        <th>Год</th>
                        <th>Средняя зарплата для Backend-программиста (в рублях)</th>
                    </tr>
                </thead>
                <tbody>
                    {% for item in backend_avg_salary_stats %}
                        <tr>
                            <td>{{ item.year }}</td>
                            <td>{{ item.backend_average_salary }}</td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>

    <h2 class="subsection-title">Количество вакансий (Backend-программист) по годам</h2>
    <div class="chart-section">
        <img class="chart-img" src="{% static 'vacancies/img/vacancies_backend.png' %}" alt="Количество вакансий для Backend-программиста">
        <div class="table-container">
            <table class="table">
                <thead class="table-header">
                    <tr>
                        <th>Год</th>
                        <th>Количество вакансий (Backend-программист)</th>
                    </tr>
                </thead>
                <tbody>
                    {% for item in backend_stats %}
                        <tr>
                            <td>{{ item.year }}</td>
                            <td>{{ item.backend_vacancy_count }}</td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
{% endblock %}
